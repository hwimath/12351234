<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>극대와 극소</title>
  <!-- MathJax -->
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>

  <style>
    /* 흑백 테마 */
    body, html {
      margin: 0; padding: 0;
      background-color: #fff;
      color: #000;
      font-family: sans-serif;
    }
    #introScreen, #quizScreen, #endScreen {
      display: none;
      padding: 20px;
      max-width: 750px;
      margin: 0 auto;
    }
    h1, h2, h3 {
      margin: 10px 0;
    }
    .hidden {
      display: none;
    }
    .choiceBtn {
      display: inline-block;
      margin: 5px 0;
      padding: 8px;
      border: 1px solid #000;
      background: #fff;
      cursor: pointer;
      width: 100%;
      text-align: left;
    }
    .choiceBtn:hover {
      background: #eee;
    }
    #energyBarContainer {
      width: 100%;
      height: 10px;
      background-color: #ccc;
      margin: 10px 0 20px 0;
    }
    #energyBar {
      height: 100%;
      width: 100%;
      background-color: #000;
      transition: width 0.2s linear;
    }
    #gameInfo {
      margin: 10px 0;
    }
    #response {
      margin-top: 10px;
      white-space: pre-wrap;
    }
    /* 간단한 버튼 스타일 */
    button {
      margin: 5px 0;
      padding: 6px 12px;
      border: 1px solid #000;
      background-color: #fff;
      cursor: pointer;
    }
    button:hover {
      background-color: #eee;
    }
  </style>
</head>
<body>
<div id="introScreen">
  <h1>극대와 극소</h1>
  <p>이름을 입력하세요:</p>
  <input type="text" id="playerName" placeholder="이름">
  <p>난이도를 선택하세요:</p>
  <button onclick="selectDifficulty('최상')">최상 (20초, 문제당 20점)</button>
  <button onclick="selectDifficulty('상')">상 (30초, 문제당 15점)</button>
  <button onclick="selectDifficulty('중')">중 (40초, 문제당 13점)</button>
  <button onclick="selectDifficulty('하')">하 (시간 제한 없음, 문제당 10점)</button>
</div>

<div id="quizScreen">
  <div id="gameInfo">
    <span id="totalTimeDisplay">총 경과 시간: 0초</span> |
    <span id="livesDisplay">남은 기회: 3</span> |
    <span id="scoreDisplay">점수: 0</span>
  </div>
  <div id="energyBarContainer">
    <div id="energyBar"></div>
  </div>
  <div id="questionContainer">
    <!-- 문제와 보기 표시 영역 -->
    <div id="questionText" style="margin-bottom:10px;"></div>
    <div id="choices"></div>
  </div>
</div>

<div id="endScreen">
  <h2>게임 종료</h2>
  <p id="finalMessage"></p>
  <p id="finalScore"></p>
  <button onclick="sendScore()">점수전송</button>
  <p id="response"></p>
</div>

<script>
//----------------------------
// MathJax 렌더링 함수 호출 헬퍼
//----------------------------
function renderMath() {
  MathJax.typeset();
}

//----------------------------
// 서버에 점수 전송 함수
//----------------------------
function saveData(game, name, score, elapsedTime) {
  const FUNCTION_URL = "https://us-central1-record-f420d.cloudfunctions.net/report";

  const requestData = {
      game,
      name,
      score: parseInt(score, 10),
      elapsedTime: parseInt(elapsedTime, 10)
  };

  fetch(FUNCTION_URL, {
      method: 'POST',
      headers: {
          'Content-Type': 'application/json'
      },
      body: JSON.stringify(requestData)
  })
  .then(response => response.json().then(data => ({ ok: response.ok, data })))
  .then(({ ok, data }) => {
      if (ok) {
          document.getElementById('response').innerText =
              `성공: ${JSON.stringify(data, null, 2)}`;
      } else {
          document.getElementById('response').innerText =
              `오류: ${JSON.stringify(data, null, 2)}`;
      }
  })
  .catch(error => {
      console.error('요청 실패:', error);
      document.getElementById('response').innerText =
          `네트워크 오류: ${error.message}`;
  });
}

function sendScore() {
  saveData("극대와 극소", playerName, score, Math.floor(totalTime));
}

//----------------------------
// 전역 변수들
//----------------------------
let playerName = "";
let difficulty = "";
let timePerQuestion = 0;
let pointsPerQuestion = 0;
let timerInterval = null;
let totalTimeInterval = null;
let totalTime = 0;
let remainingLives = 3;
let score = 0;
let currentQuestionIndex = 0;
let questionTimer = 0; // 현재 문제 제한시간(초)
let questionTimeLeft = 0;
let allQuestions = [];
let shuffledQuestions = [];
// 무제한 반복을 위해, 전부 소진하면 다시 섞어 재시작

//----------------------------
// 문제 셔플 함수
//----------------------------
function shuffleArray(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

//----------------------------
// 난이도 선택 시 호출
//----------------------------
function selectDifficulty(diff) {
  playerName = document.getElementById('playerName').value.trim();
  if(!playerName) {
    alert("이름을 입력하세요!");
    return;
  }
  difficulty = diff;
  switch(difficulty) {
    case "최상":
      timePerQuestion = 20;
      pointsPerQuestion = 20;
      break;
    case "상":
      timePerQuestion = 30;
      pointsPerQuestion = 15;
      break;
    case "중":
      timePerQuestion = 40;
      pointsPerQuestion = 13;
      break;
    case "하":
      timePerQuestion = 999999; // 사실상 무제한
      pointsPerQuestion = 10;
      break;
  }
  document.getElementById('introScreen').style.display = "none";
  startGame();
}

//----------------------------
// 게임 시작
//----------------------------
function startGame() {
  remainingLives = 3;
  score = 0;
  totalTime = 0;
  currentQuestionIndex = 0;

  // 전체 문제를 준비
  prepareQuestions();
  // 문제 배열 셔플
  shuffledQuestions = shuffleArray(allQuestions.slice());

  document.getElementById('quizScreen').style.display = "block";
  document.getElementById('endScreen').style.display = "none";
  document.getElementById('totalTimeDisplay').textContent = "총 경과 시간: 0초";
  document.getElementById('livesDisplay').textContent = `남은 기회: ${remainingLives}`;
  document.getElementById('scoreDisplay').textContent = `점수: ${score}`;

  // 전체 시간 카운트
  if(totalTimeInterval) clearInterval(totalTimeInterval);
  totalTimeInterval = setInterval(()=>{
    totalTime += 1;
    document.getElementById('totalTimeDisplay').textContent = 
      `총 경과 시간: ${Math.floor(totalTime)}초`;
  },1000);

  showQuestion();
}

//----------------------------
// 문제 및 보기 표시
//----------------------------
function showQuestion() {
  if(currentQuestionIndex >= shuffledQuestions.length) {
    // 모든 문제 사용 후 => 다시 섞고 처음부터
    shuffledQuestions = shuffleArray(allQuestions.slice());
    currentQuestionIndex = 0;
  }
  const q = shuffledQuestions[currentQuestionIndex];

  document.getElementById('questionText').innerHTML = q.question;
  const choicesDiv = document.getElementById('choices');
  choicesDiv.innerHTML = '';

  // 보기 섞기
  let choiceArr = q.choices.slice();
  shuffleArray(choiceArr);

  // 정답 텍스트 추적
  const correctText = q.choices[q.correct];
  
  choiceArr.forEach((cText, idx) => {
    let btn = document.createElement('button');
    btn.className = "choiceBtn";
    btn.innerHTML = cText;
    btn.onclick = () => {
      if(cText === correctText) {
        // 정답
        score += pointsPerQuestion;
        document.getElementById('scoreDisplay').textContent = `점수: ${score}`;
      } else {
        // 오답
        remainingLives--;
        document.getElementById('livesDisplay').textContent = `남은 기회: ${remainingLives}`;
        alert("틀렸습니다!\n정답: " + correctText.replace(/^A\.|^B\.|^C\.|^D\./, ''));
        if(remainingLives <= 0) {
          endGame();
          return;
        }
      }
      // 다음 문제
      nextQuestion();
    };
    choicesDiv.appendChild(btn);
  });

  // 수식 렌더링
  renderMath();

  // 에너지바 시간 리셋
  questionTimeLeft = timePerQuestion;
  updateEnergyBar();

  if(timerInterval) clearInterval(timerInterval);
  if(timePerQuestion < 999999) {
    // 시간 제한이 있을 때만
    timerInterval = setInterval(()=>{
      questionTimeLeft--;
      updateEnergyBar();
      if(questionTimeLeft<=0) {
        clearInterval(timerInterval);
        // 시간 초과 => 오답 처리
        remainingLives--;
        document.getElementById('livesDisplay').textContent = `남은 기회: ${remainingLives}`;
        alert("시간이 초과되었습니다!\n정답: " 
              + correctText.replace(/^A\.|^B\.|^C\.|^D\./, ''));
        if(remainingLives <= 0) {
          endGame();
          return;
        }
        nextQuestion();
      }
    },1000);
  }
}

//----------------------------
// 에너지바 갱신
//----------------------------
function updateEnergyBar() {
  const bar = document.getElementById("energyBar");
  if(timePerQuestion >= 999999) {
    bar.style.width = "100%";
    return;
  }
  const percent = (questionTimeLeft / timePerQuestion)*100;
  bar.style.width = percent + "%";
}

//----------------------------
// 다음 문제로 이동
//----------------------------
function nextQuestion() {
  clearInterval(timerInterval);
  currentQuestionIndex++;
  showQuestion();
}

//----------------------------
// 게임 종료
//----------------------------
function endGame() {
  clearInterval(timerInterval);
  clearInterval(totalTimeInterval);
  document.getElementById('quizScreen').style.display = "none";
  document.getElementById('endScreen').style.display = "block";

  document.getElementById('finalMessage').textContent = 
    (remainingLives<=0) ? "3회 오답으로 게임 오버!" : "게임 종료";
  document.getElementById('finalScore').textContent = `최종 점수: ${score}`;
}

//----------------------------
// 모든 문제 준비
//----------------------------
function prepareQuestions() {
  // 이미 채워져 있으면 재호출 시 초기화
  allQuestions = [];

  // 1. 함수 \\(f(x)=x^3-3x\\)
  //    수정: 정답(극댓값 2, 극솟값 -2)를 첫 번째 옵션으로 배치
  allQuestions.push({
    question: "함수 \\(f(x)=x^3-3x\\)의 극댓값과 극솟값(존재한다면)을 모두 구하시오.",
    choices: [
      "A. 극댓값 2, 극솟값 -2",
      "B. 극댓값 3, 극솟값 -3",
      "C. 극댓값 1, 극솟값 -1",
      "D. 극댓값 -2, 극솟값 2"
    ],
    correct: 0
  });

  // 2. 함수 \\(f(x)=-x^3+12x+5\\)
  allQuestions.push({
    question: "함수 \\(f(x)=-x^3+12x+5\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 21, 극솟값 -11",
      "B. 극댓값 20, 극솟값 -10",
      "C. 극댓값 24, 극솟값 -12",
      "D. 극댓값 22, 극솟값 -11"
    ],
    correct: 0
  });

  // 3. 함수 \\(f(x)=x^3-6x^2\\)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3-6x^2\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 0, 극솟값 -32",
      "B. 극댓값 -32, 극솟값 0",
      "C. 극댓값 4, 극솟값 -4",
      "D. 극댓값 2, 극솟값 -2"
    ],
    correct: 0
  });

  // 4. 함수 \\(f(x)=-2x^3+6x+1\\)
  //    수정: 정답은 극댓값 5, 극솟값 -3 (옵션 A로 배치)
  allQuestions.push({
    question: "함수 \\(f(x)=-2x^3+6x+1\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 5, 극솟값 -3",
      "B. 극댓값 7, 극솟값 -5",
      "C. 극댓값 4, 극솟값 -2",
      "D. 극댓값 3, 극솟값 -1"
    ],
    correct: 0
  });

  // 5. 함수 \\(f(x)=x^3-3x^2+2\\)
  //    수정: 정답은 극댓값 2, 극솟값 -2 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3-3x^2+2\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 2, 극솟값 -2",
      "B. 극댓값 3, 극솟값 -3",
      "C. 극댓값 2, 극솟값 0",
      "D. 극댓값 4, 극솟값 -2"
    ],
    correct: 0
  });

  // 6. 함수 \\(f(x)=x^3+3x^2-24\\)
  //    수정: 정답은 극댓값 -20, 극솟값 -24 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+3x^2-24\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 -20, 극솟값 -24",
      "B. 극댓값 -18, 극솟값 -24",
      "C. 극댓값 -20, 극솟값 -26",
      "D. 극댓값 -22, 극솟값 -24"
    ],
    correct: 0
  });

  // 7. 함수 \\(f(x)=x^3-3x^2+1\\)
  //    수정: 정답은 극댓값 1, 극솟값 -3 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3-3x^2+1\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 1, 극솟값 -3",
      "B. 극댓값 1, 극솟값 -2",
      "C. 극댓값 2, 극솟값 -1",
      "D. 극댓값 2, 극솟값 -2"
    ],
    correct: 0
  });

  // 8. 함수 \\(f(x)=-x^3+3x+3\\)
  //    수정: 정답은 극댓값 5, 극솟값 1 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=-x^3+3x+3\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 5, 극솟값 1",
      "B. 극댓값 5, 극솟값 -1",
      "C. 극댓값 3, 극솟값 1",
      "D. 극댓값 4, 극솟값 0"
    ],
    correct: 0
  });

  // 9. 함수 \\(f(x)=x^3-6x^2+9x\\)
  //    수정: 정답은 극댓값 4, 극솟값 0 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3-6x^2+9x\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 4, 극솟값 0",
      "B. 극댓값 3, 극솟값 1",
      "C. 극댓값 4, 극솟값 -4",
      "D. 극댓값 0, 극솟값 -9"
    ],
    correct: 0
  });

  // 10. 함수 \\(f(x)=x^3+3x^2-9x-11\\)
  //     수정: 정답은 극댓값 16, 극솟값 -16 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+3x^2-9x-11\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 16, 극솟값 -16",
      "B. 극댓값 16, 극솟값 -11",
      "C. 극댓값 -2, 극솟값 -20",
      "D. 극댓값 -1, 극솟값 -19"
    ],
    correct: 0
  });

  // 11. (원래 11번 문제는 답 개념이 모호하여 삭제함)

  // 12. 함수 \\(f(x)=x^3-6x^2+9x-2\\)
  //     수정: 정답은 극댓값 2, 극솟값 -2 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3-6x^2+9x-2\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 2, 극솟값 -2",
      "B. 극댓값 0, 극솟값 -2",
      "C. 극댓값 -1, 극솟값 -3",
      "D. 극댓값 -2, 극솟값 -6"
    ],
    correct: 0
  });

  // 13. 함수 \\(f(x)=2x^3-6x+5\\)
  //     수정: 정답은 극댓값 9, 극솟값 1 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=2x^3-6x+5\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 9, 극솟값 1",
      "B. 극댓값 7, 극솟값 2",
      "C. 극댓값 8, 극솟값 0",
      "D. 극댓값 5, 극솟값 -7"
    ],
    correct: 0
  });

  // 14. 함수 \\(f(x)=2x^3-3x^2+2\\)
  allQuestions.push({
    question: "함수 \\(f(x)=2x^3-3x^2+2\\)의 극댓값과 극솟값을 구하시오.",
    choices: [
      "A. 극댓값 2, 극솟값 1",
      "B. 극댓값 3, 극솟값 -1",
      "C. 극댓값 1, 극솟값 0",
      "D. 극댓값 4, 극솟값 1"
    ],
    correct: 0
  });

  // 15. 미분 가능함수 \\(f(x)\\)가 \\(x=1\\)에서 극값이 8일 때, \\(f(1)+f'(1)\\)
  //     수정: 극값이므로 \\(f'(1)=0\\) → 답은 8 (옵션 A)
  allQuestions.push({
    question: "미분 가능함수 \\(f(x)\\)가 \\(x=1\\)에서 극값이 8일 때, \\(f(1)+f'(1)\\)의 값을 구하시오.",
    choices: [
      "A. 8",
      "B. 7",
      "C. 9",
      "D. 0"
    ],
    correct: 0
  });

  // 16. 두 이차함수 \\(f(x)=x^2+ax+3\\), \\(g(x)=-2x^2+bx+4\\)
  //     수정: 극점이 \\(x=2\\)이려면 a=-4, b=8 → 답은 (-4,8) (옵션 A)
  allQuestions.push({
    question: "두 이차함수 \\(f(x)=x^2+ax+3\\), \\(g(x)=-2x^2+bx+4\\)가 모두 \\(x=2\\)에서 극값을 가질 때, 상수 \\(a,b\\)를 구하시오.",
    choices: [
      "A. (-4, 8)",
      "B. (4, 8)",
      "C. (-4, -8)",
      "D. (4, -8)"
    ],
    correct: 0
  });

  // 17. 함수 \\(f(x)=x^3+a x^2+b x+c\\) (\\(x=-1\\)에서 극값 3, \\(x=1\\)에서 극값)
  //     수정: 연립방정식으로 a=0, b=-3, c=1 → 답은 (0, -3, 1) (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+c\\)가 \\(x=-1\\)에서 극댓값 3을 갖고, \\(x=1\\)에서 극값을 갖는다. 이때 상수 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (0, -3, 1)",
      "B. (0, 3, 1)",
      "C. (-3, 0, 1)",
      "D. (-3, 3, 1)"
    ],
    correct: 0
  });

  // 18. 함수 \\(f(x)=x^3+a x^2+b x+c\\) (\\(x=2\\)에서 극솟값 -10, \\(x=-3\\)에서 극값)
  //     수정: 연립방정식 → a=3/2, b=-18, c=12 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+c\\)가 \\(x=2\\)에서 극솟값 -10을 갖고, \\(x=-3\\)에서 극값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (3/2, -18, 12)",
      "B. (3/2, -18, -12)",
      "C. (2, -16, 10)",
      "D. (3, -18, 12)"
    ],
    correct: 0
  });

  // 19. 함수 \\(f(x)=x^3+a x^2+b x+c\\) (\\(x=0\\)에서 극값 3, \\(x=2\\)에서 극값)
  //     → a=-3, b=0, c=3 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+c\\)가 \\(x=0\\)에서 극댓값 3을, \\(x=2\\)에서 극값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (-3,0,3)",
      "B. (-6,0,3)",
      "C. (-3,6,3)",
      "D. (0,-6,3)"
    ],
    correct: 0
  });

  // 20. 함수 \\(f(x)=x^3+a x^2+b x+c\\) (\\(x=-2\\)에서 극솟값 30, \\(x=4\\)에서 극댓값)
  //     수정: 연립 → a=-3, b=-24, c=2 → 답은 (-3, -24, 2) (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+c\\)가 \\(x=-2\\)에서 극솟값 30을 갖고, \\(x=4\\)에서 극댓값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (-3, -24, 2)",
      "B. (-3, -12, 2)",
      "C. (-6, -24, 2)",
      "D. (-3, -24, 5)"
    ],
    correct: 0
  });

  // 21. 함수 \\(f(x)=-x^3+a x^2+b x+c\\) (\\(x=1\\)에서 극값 6, \\(x=-1\\)에서 극값)
  //     수정: 연립 → a=0, b=3, c=4 → 답은 (0, 3, 4) (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=-x^3+a x^2+b x+c\\)가 \\(x=1\\)에서 극값 6을 갖고, \\(x=-1\\)에서 극값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (0, 3, 4)",
      "B. (3,0,2)",
      "C. (3,-6,4)",
      "D. (6,6,0)"
    ],
    correct: 0
  });

  // 22. 함수 \\(f(x)=-x^3+a x^2+b x+c\\) (\\(x=0\\)에서 극댓값 4, \\(x=-2\\)에서 극값)
  //     수정: → a=-3, b=0, c=4 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=-x^3+a x^2+b x+c\\)가 \\(x=0\\)에서 극댓값 4를 갖고, \\(x=-2\\)에서 극값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (-3, 0, 4)",
      "B. (0,0,4)",
      "C. (3, 0, 4)",
      "D. (-3, 0, 2)"
    ],
    correct: 0
  });

  // 23. 함수 \\(f(x)=2x^3+a x^2+b x+c\\) (\\(x=-1\\)에서 극값 4, \\(x=2\\)에서 극값)
  //     수정: → a=-3, b=-12, c=-3 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=2x^3+a x^2+b x+c\\)가 \\(x=-1\\)에서 극댓값 4를 갖고, \\(x=2\\)에서 극값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (-3, -12, -3)",
      "B. (-3, -10, -3)",
      "C. (-2, -12, -3)",
      "D. (1,-2,3)"
    ],
    correct: 0
  });

  // 24. 함수 \\(f(x)=2x^3+a x^2+b x+c\\) (\\(x=-1\\)에서 극값 10, \\(x=2\\)에서 극값)
  //     수정: → a=-3, b=-12, c=3 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=2x^3+a x^2+b x+c\\)가 \\(x=-1\\)에서 극댓값 10을 갖고, \\(x=2\\)에서 극값을 갖는다. 이때 \\(a,b,c\\)를 구하시오.",
    choices: [
      "A. (-3, -12, 3)",
      "B. (-3, -10, 3)",
      "C. (4,-2,10)",
      "D. (-2,-4,10)"
    ],
    correct: 0
  });

  // 25. 함수 \\(f(x)=2x^3-12x^2+a x-4\\)
  //     수정: f'(1)=0 → a=18, f(1)=4, 따라서 a+M=18+4=22 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=2x^3-12x^2+a x-4\\)가 \\(x=1\\)에서 극댓값 \\(M\\)을 갖는다고 할 때, \\(a+M\\)의 값을 구하시오.",
    choices: [
      "A. 22",
      "B. 18",
      "C. 4",
      "D. 20"
    ],
    correct: 0
  });

  // 26. 함수 \\(f(x)=x^3+a x^2+b x+5\\)
  //     수정: 극점 조건을 풀면 a+b=3 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+5\\)가 \\(x=1\\)에서 극값을, \\(x=3\\)에서 극값을 가질 때, \\(a+b\\)의 값을 구하시오.",
    choices: [
      "A. 3",
      "B. -2",
      "C. 0",
      "D. 2"
    ],
    correct: 0
  });

  // 27. 함수 \\(f(x)=x^3+a x^2+b x+10\\)
  //     수정: 조건을 풀면 a+b+m=59 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+10\\)이 \\(x=-1\\)에서 극댓값 3을 갖고, 다른 \\(x\\)에서 극값 \\(m\\)을 가질 때, \\(a+b+m\\)을 구하시오.",
    choices: [
      "A. 59",
      "B. 9",
      "C. 15",
      "D. 35"
    ],
    correct: 0
  });

  // 28. 함수 수정:
  //     원래 조건으로는 다른 극값이 깔끔하지 않아, 조건을 바꿔
  //     → 함수 \\(f(x)=-2x^3+3x^2+12x\\)가 \\(x=2\\)에서 극값 20을 가지면,
  //        미분하면 극점은 x=2와 x=-1, f(-1) = -7.
  allQuestions.push({
    question: "함수 \\(f(x)=-2x^3+3x^2+12x\\)가 \\(x=2\\)에서 극값 20을 가질 때, 이 함수의 다른 극값을 구하시오.",
    choices: [
      "A. -7",
      "B. 0",
      "C. 3",
      "D. 7"
    ],
    correct: 0
  });

  // 29. 함수 \\(f(x)=x^3+a x^2+b x+c\\) (\\(x=1\\)에서 극값 3, \\(x=2\\)에서 극값)
  //     수정: 계산하면 f(3)=5 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=x^3+a x^2+b x+c\\)가 \\(x=1\\)에서 극값 3을, \\(x=2\\)에서 극값을 가질 때, \\(f(3)\\)의 값을 구하시오.",
    choices: [
      "A. 5",
      "B. -1",
      "C. 3",
      "D. 6"
    ],
    correct: 0
  });

  // 30. 함수 \\(f(x)=-x^3+a x^2+b x+c\\) (\\(x=0\\)에서 극댓값 2, \\(x=-2\\)에서 극값)
  //     수정: 계산하면 f(-1)=0 (옵션 A)
  allQuestions.push({
    question: "함수 \\(f(x)=-x^3+a x^2+b x+c\\)가 \\(x=0\\)에서 극댓값 2를, \\(x=-2\\)에서 극값을 가질 때, \\(f(-1)\\)의 값을 구하시오.",
    choices: [
      "A. 0",
      "B. -1",
      "C. 1",
      "D. 3"
    ],
    correct: 0
  });

  // 31. 최고차항 계수 1인 삼차함수 (\\(x=2\\)에서 극값 -2, \\(f(0)=2\\))
  //     수정: 계산하면 다른 극값은 f(0)=2 (옵션 A)
  allQuestions.push({
    question: "최고차항의 계수가 1인 삼차함수 \\(f(x)\\)가 \\(x=2\\)에서 극값 -2를 갖고, \\(f(0)=2\\)일 때, 이 함수의 다른 극값을 구하시오.",
    choices: [
      "A. 2",
      "B. -2",
      "C. 1",
      "D. 4"
    ],
    correct: 0
  });
}

// 초기 화면 표시
document.getElementById('introScreen').style.display = "block";
</script>
</body>
</html>
